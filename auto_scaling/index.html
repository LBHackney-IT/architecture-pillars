<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/architecture-pillars/blog/rss.xml" title="Hackney Architecture Pillars Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/architecture-pillars/blog/atom.xml" title="Hackney Architecture Pillars Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Hackney Architecture Pillars" href="/architecture-pillars/opensearch.xml"><title data-react-helmet="true">Auto-scaling for AWS resources used in Software Engineering | Hackney Architecture Pillars</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Auto-scaling for AWS resources used in Software Engineering | Hackney Architecture Pillars"><meta data-react-helmet="true" name="description" content="Context"><meta data-react-helmet="true" property="og:description" content="Context"><meta data-react-helmet="true" property="og:url" content="https://github.com/LBHackney-IT/architecture-pillars/architecture-pillars/auto_scaling"><link data-react-helmet="true" rel="shortcut icon" href="/architecture-pillars/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://github.com/LBHackney-IT/architecture-pillars/architecture-pillars/auto_scaling"><link rel="stylesheet" href="/architecture-pillars/styles.cd915cb9.css">
<link rel="stylesheet" href="/architecture-pillars/main.4a16e2e4.css">
<link rel="preload" href="/architecture-pillars/styles.5b2efb06.js" as="script">
<link rel="preload" href="/architecture-pillars/runtime~main.a7f09ce7.js" as="script">
<link rel="preload" href="/architecture-pillars/main.301ae117.js" as="script">
<link rel="preload" href="/architecture-pillars/1.e4b44569.js" as="script">
<link rel="preload" href="/architecture-pillars/2.36e6e92a.js" as="script">
<link rel="preload" href="/architecture-pillars/26.1305be43.js" as="script">
<link rel="preload" href="/architecture-pillars/29.d506cd42.js" as="script">
<link rel="preload" href="/architecture-pillars/935f2afb.8f55a00c.js" as="script">
<link rel="preload" href="/architecture-pillars/17896441.b52e9fa3.js" as="script">
<link rel="preload" href="/architecture-pillars/2ac62703.749d40e2.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/architecture-pillars/"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Architecture Pillars</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/architecture-pillars" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/architecture-pillars/"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Architecture Pillars</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/LBHackney-IT/architecture-pillars" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/architecture-pillars/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Architecture Pillars</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Reliabilty</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/production_deployment">Production Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/core_resource_compliance">Core AWS resources compliance checks</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Scalibility</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/architecture-pillars/auto_scaling">Auto-scaling for AWS resources used in Software Engineering</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/core_resource_compliance">Core AWS resources compliance checks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/dev_least_principles">Developer Least Priviledge Principles</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Cost Optimisation</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/architecture-pillars/auto_scaling">Auto-scaling for AWS resources used in Software Engineering</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">High Availability and Performance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Development Principles and Quality Assurance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/testing_standards">HackIT Testing Standards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/data_driven">HackIT Data Driven Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/api_compliance">API Compliance Checklist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/qa_process">Enhancing the Quality Assurance process in Hackney through the use of automation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/repository_standards">Managing our GitHub repositoriesâ€™ branches</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/minimum_qa_standard">Minimum QA testing requirements in Hackneyâ€™s Software Development Lifecycle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/developer_onboarding">Developer technical on-boarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/data_modelling">Data Modelling Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/adr">Architecture Decision Records</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/api_spec_asessment_process">API Specifications Assessment Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/data_meetup_template">Data Meetup Template</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/architecture-pillars/contact_us">Contact Our Development Team</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">Auto-scaling for AWS resources used in Software Engineering</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="context"></a>Context<a class="hash-link" href="#context" title="Direct link to heading">#</a></h3><p>To achieve cost optimization, all AWS services provisioned as part of the software delivery lifecycle, where capacity is pre-configured at the point of provisioning, must have an associated auto-scaling policy to ensure that we are only paying for what we use. </p><p>Cloud resources auto-scaling is the process of automatically scaling up or down based on traffic patterns and usage.</p><p>Enabling auto-scaling will reduce the possibility of over-provisioning due to incorrect predictions of what capacity will be required.  </p><p>This document outlines the common AWS resources used as part of delivering software that will require an auto-scaling policy to be applied. </p><p><strong>Note:</strong> EC2 has been excluded from the list as we strive to use serverless technologies when delivering digital services. EC2 is only used for our bastion hosts, which are already provisioned with minimal capacity.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="rds"></a>RDS<a class="hash-link" href="#rds" title="Direct link to heading">#</a></h3><p>AWS RDS currently supports only <a href="https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/USER_PIOPS.StorageTypes.html#USER_PIOPS.Autoscaling" target="_blank" rel="noopener noreferrer">storage autoscaling</a> as an automated way to scale database instances. </p><p>Auto-scaling applies to an RDS database instance when the following factors are true: </p><ul><li>Free available space is less than 10 percent of the allocated storage.</li><li>The low-storage condition lasts at least five minutes.</li><li>At least six hours have passed since the last storage modification, or storage optimization has completed on the instance, whichever is longer.</li></ul><p>To provide cost optimization, RDS database instances should be provisioned with a smaller allocated storage space and an auto-scaling option enabled. The provisioned storage capacity <strong>should not</strong> be based on predictions for future service needs - it should instead reflect the foreseeable future data storage needs and scale up automatically only if required.</p><p><strong>Considerations:</strong></p><ul><li>Always set a reasonable maximum and minimum storage capacity to be used for auto-scaling to avoid scenarios where data storage needs have grown exponentially for a reason different to genuine service needs. <ul><li>Example for such scenario is large logs stored in Postgres due to failing DMS task resulting in database storage used increasing continuously. In such situations, alarms should be in place to prompt investigation.</li></ul></li><li>If you are not sure how much storage space will be required for a database, please start with the default amount suggested by AWS for the given database instance type and enable auto-scaling.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="dynamodb"></a>DynamoDB<a class="hash-link" href="#dynamodb" title="Direct link to heading">#</a></h3><p>You can use the <a href="https://docs.aws.amazon.com/autoscaling/application/userguide/what-is-application-auto-scaling.html" target="_blank" rel="noopener noreferrer">AWS Application Auto Scaling</a> service to set up automated scaling policies for DynamoDB.</p><p>DynamoDB autoscaling can be applied to both -  a table and a Global Secondary Index (GSI).</p><p>At Hackney, DynamoDB tables uses provisioned capacity mode, which means that we are billed based on read and write capacity units that a table is provisioned with. </p><p>To achieve cost optimization, all DynamoDB tables must have a scaling policy associated that will increase or decrease the RCUs and WCUs based on the traffic patterns.</p><p>A guide to enabling auto-scaling for DynamoDB tables using Terraform can be found <a href="https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/appautoscaling_policy" target="_blank" rel="noopener noreferrer">here</a>.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="aws-lambda"></a>AWS Lambda<a class="hash-link" href="#aws-lambda" title="Direct link to heading">#</a></h3><p>Hackney does not use provisioned concurrency for the majority of the Lambda functions used. This means that Lambda handles concurrency and scaling automatically, as described in the <a href="https://docs.aws.amazon.com/lambda/latest/dg/invocation-scaling.html" target="_blank" rel="noopener noreferrer">official documentation</a>. For this reason, there is no need to apply auto-scaling as this is already handled by default.</p><p>For any Lambda functions using provisioned concurrency, an auto-scaling policy must be applied, AWS Application Auto Scaling service can be used to automate the scaling process as described <a href="https://docs.aws.amazon.com/autoscaling/application/userguide/services-that-can-integrate-lambda.html" target="_blank" rel="noopener noreferrer">here</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/LBHackney-IT/architecture-pillars/edit/master/docs/auto_scaling.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/architecture-pillars/preferred_data_source"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Preferred types of databases and when to use</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/architecture-pillars/core_resource_compliance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Core AWS resources compliance checks Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#context" class="table-of-contents__link">Context</a></li><li><a href="#rds" class="table-of-contents__link">RDS</a></li><li><a href="#dynamodb" class="table-of-contents__link">DynamoDB</a></li><li><a href="#aws-lambda" class="table-of-contents__link">AWS Lambda</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/architecture-pillars/styles.5b2efb06.js"></script>
<script src="/architecture-pillars/runtime~main.a7f09ce7.js"></script>
<script src="/architecture-pillars/main.301ae117.js"></script>
<script src="/architecture-pillars/1.e4b44569.js"></script>
<script src="/architecture-pillars/2.36e6e92a.js"></script>
<script src="/architecture-pillars/26.1305be43.js"></script>
<script src="/architecture-pillars/29.d506cd42.js"></script>
<script src="/architecture-pillars/935f2afb.8f55a00c.js"></script>
<script src="/architecture-pillars/17896441.b52e9fa3.js"></script>
<script src="/architecture-pillars/2ac62703.749d40e2.js"></script>
</body>
</html>