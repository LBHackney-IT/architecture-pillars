<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/architecture-pillars/blog/rss.xml" title="Hackney Architecture Pillars Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/architecture-pillars/blog/atom.xml" title="Hackney Architecture Pillars Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Hackney Architecture Pillars" href="/architecture-pillars/opensearch.xml"><title data-react-helmet="true">AWS Config for enabling automated remediation | Hackney Architecture Pillars</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="AWS Config for enabling automated remediation | Hackney Architecture Pillars"><meta data-react-helmet="true" name="description" content="Context"><meta data-react-helmet="true" property="og:description" content="Context"><meta data-react-helmet="true" property="og:url" content="https://github.com/LBHackney-IT/architecture-pillars/architecture-pillars/automated_remediation"><link data-react-helmet="true" rel="shortcut icon" href="/architecture-pillars/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://github.com/LBHackney-IT/architecture-pillars/architecture-pillars/automated_remediation"><link rel="stylesheet" href="/architecture-pillars/styles.cd915cb9.css">
<link rel="stylesheet" href="/architecture-pillars/main.4a16e2e4.css">
<link rel="preload" href="/architecture-pillars/styles.59ce4859.js" as="script">
<link rel="preload" href="/architecture-pillars/runtime~main.fb458387.js" as="script">
<link rel="preload" href="/architecture-pillars/main.d98cc4a5.js" as="script">
<link rel="preload" href="/architecture-pillars/1.d704cc14.js" as="script">
<link rel="preload" href="/architecture-pillars/2.cfa801d4.js" as="script">
<link rel="preload" href="/architecture-pillars/29.861029c2.js" as="script">
<link rel="preload" href="/architecture-pillars/32.a55e7306.js" as="script">
<link rel="preload" href="/architecture-pillars/935f2afb.77f91658.js" as="script">
<link rel="preload" href="/architecture-pillars/17896441.cc7c9bcb.js" as="script">
<link rel="preload" href="/architecture-pillars/e2eee4d6.19a81a48.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/architecture-pillars/"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Architecture Pillars</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/architecture-pillars" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/architecture-pillars/"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Architecture Pillars</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/LBHackney-IT/architecture-pillars" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/architecture-pillars/">Introduction</a></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Architecture Pillars</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Reliabilty</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/production_deployment">Production Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/core_resource_compliance">Core AWS resources compliance checks</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/architecture-pillars/automated_remediation">AWS Config for enabling automated remediation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Scalibility</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/auto_scaling">Auto-scaling for AWS resources used in Software Engineering</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/core_resource_compliance">Core AWS resources compliance checks</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/dev_least_principles">Developer Least Priviledge Principles</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Cost Optimisation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/auto_scaling">Auto-scaling for AWS resources used in Software Engineering</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/cloudwatch_log_retention">CloudWatch Log Retention Policy</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">High Availability and Performance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/production_deployment">Production Deployment</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Development Principles and Quality Assurance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/testing_standards">HackIT Testing Standards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/data_driven">HackIT Data Driven Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/api_compliance">API Compliance Checklist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/qa_process">Enhancing the Quality Assurance process in Hackney through the use of automation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/repository_standards">Managing our GitHub repositoriesâ€™ branches</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/minimum_qa_standard">Minimum QA testing requirements in Hackneyâ€™s Software Development Lifecycle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/developer_onboarding">Developer technical on-boarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/data_modelling">Data Modelling Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/adr">Architecture Decision Records</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/api_spec_asessment_process">API Specifications Assessment Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/data_meetup_template">Data Meetup Template</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/release_process">Managing API Releases</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/architecture-pillars/contact_us">Contact Our Development Team</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">AWS Config for enabling automated remediation</h1></header><div class="markdown"><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="context"></a>Context<a class="hash-link" href="#context" title="Direct link to heading">#</a></h3><p>AWS Config is an AWS service that provides a method to assess if the configuration of AWS resources deployed in an account are compliant with a set of manually configured rules and allows us to keep track of all changes made. </p><p>AWS provides a set of predefined rules that can be used, but also has the option of creating custom ones. The rules that are being evaluated are chosen by the customer on a per account/per resource basis based on the service and organisation needs and identify if the configuration of an existing or newly provisioned resource is compliant with common best practices - for example, if encryption is enabled for DynamoDB tables.</p><p>AWS Config official documentation that details additional features can be found <a href="https://aws.amazon.com/config/" target="_blank" rel="noopener noreferrer">here</a>.</p><p>In Hackney, we are adopting several mechanisms to ensure that deployed resources are compliant with our preferred configuration, e.g. no database should be publicly accessible. Those include:</p><ul><li>Following the <a href="/architecture-pillars/dev_least_principles">least privilege principle</a>, where engineers are unable to manually create AWS resources but must instead automate the creation via IaC (infrastructure as code) and CI/CD pipelines.</li><li>Adopting <a href="https://playbook.hackney.gov.uk/API-Playbook/terraform_compliance" target="_blank" rel="noopener noreferrer">Terraform-compliance</a> security and compliance testing framework for performing pre-deployment  checks to ensure only compliant resources are deployed.</li><li>Using <a href="https://playbook.hackney.gov.uk/API-Playbook/serverless_safegaurd" target="_blank" rel="noopener noreferrer">serverless safeguards</a>  to ensure AWS resources provisioned via the Serverless framework are also compliant. </li></ul><p>However, some of those must be set up on a per-project basis, thus not guaranteeing security risks prevention by the proposed mechanisms due to no current way to ensure 100% take up amongst project teams.</p><p>Enabling AWS Config with automated remediation can be done on account level, ensuring that our internal teams can set up a mechanism to enforce compliance even if not all project teams develop services following all of our standards in place that promote governance as service.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="vision"></a>Vision<a class="hash-link" href="#vision" title="Direct link to heading">#</a></h3><ul><li>Have a defined list of compliance rules for commonly used AWS resources that is frequently reviewed and updated as and when required so that we have consistency for rules applied as well as a process to iterate that list when we change our use of existing or new AWS services.</li><li>Continuously monitor and detect non-compliant AWS resources so that we have visibility over potential security risks and performance, availability and cost impacting resources in our environments .</li><li>Automate remediation for breached rules so that our teams can focus on the other stages of a service delivery lifecycle and we have assurance that non-compliant resources would be corrected even if teams are unavailable to action a given compliance breach. </li><li>Provide assurance for our security setup so that stakeholders have a strong confidence in the setup of our environments.</li><li>Ensure that resources provisioned are set up for performance, high availability and are cost optimised so that our services are more reliable and cost efficient.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="user-needs"></a>User needs<a class="hash-link" href="#user-needs" title="Direct link to heading">#</a></h3><p>As an <strong>architect</strong>, I want to ensure</p><ul><li>that a solutionâ€™s design is implemented with the appropriate infrastructure resources configuration that is compliant with Hackneyâ€™s list of compliance requirements, which aim to promote better security, performance, reliability and availability at the lowest possible cost for a given service.</li></ul><p>As an <strong>engineer</strong>, I want </p><ul><li>a way to automate remediation of non-compliant AWS resources so that I can focus on the rest of the software lifecycle / platform activities. </li></ul><p>As a <strong>security analyst</strong>, I want</p><ul><li>assurance that services are configured as per agreed security requirements for infrastructure components.
visibility over compliance of infrastructure components with agreed security requirements.</li></ul><p>As a <strong>TDA member</strong>, I want</p><ul><li>to give assurance to Hackney senior stakeholders, staff and residents that services built are compliant and if audited, all criteria would be satisfied.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="method"></a>Method<a class="hash-link" href="#method" title="Direct link to heading">#</a></h3><p>Implement AWS Config rules and automated remediation, via Terraform, per account for the following types of resources (as part of the first iteration). </p><ul><li>AWS S3 [add terraform module link]<ul><li>Automatically block public access</li></ul></li><li>AWS RDS[add terraform module link]<ul><li>Disable public access to RDS</li><li>Enable Multi AZ on RDS</li><li>Enable deletion protection</li></ul></li><li>AWS SNS [add terraform module link]<ul><li>Encrypt SNS topics</li></ul></li><li>AWS Lambda [add terraform module link]<ul><li>Enable X-Ray for request tracing monitoring</li></ul></li><li>AWS DynamoDB [add terraform module link]<ul><li>Enable encryption</li><li>Enable PITR (Point in time recovery) for automated backups</li></ul></li></ul><p><em>The list of resources will be expanded following the trial of the tool. The initial list was prepared based on AWS resources commonly used for the development of our services.</em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="considerations"></a>Considerations<a class="hash-link" href="#considerations" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="cost"></a>Cost<a class="hash-link" href="#cost" title="Direct link to heading">#</a></h3><p>As this is an AWS paid service and we have other compliance testing mechanisms in place (e.g. terraform-compliance), should we consider implementing AWS Config only for our Production environment?</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="implementation"></a>Implementation<a class="hash-link" href="#implementation" title="Direct link to heading">#</a></h3><p>As a first iteration, this paper proposes to implement AWS Config with the set of rules and remediations already provided by AWS, instead of building custom ones. Should the tool work well for us, as well as if we identify a need for a custom rule/remediation, then that should be considered. </p><p>Further to this, can we use Control Tower to automatically enable those rules for new and existing AWS accounts instead of using terraform?</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/LBHackney-IT/architecture-pillars/edit/master/docs/automated_remediation.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/architecture-pillars/core_resource_compliance"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« Core AWS resources compliance checks</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/architecture-pillars/preferred_data_source"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Preferred types of databases and when to use Â»</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#context" class="table-of-contents__link">Context</a></li><li><a href="#vision" class="table-of-contents__link">Vision</a></li><li><a href="#user-needs" class="table-of-contents__link">User needs</a></li><li><a href="#method" class="table-of-contents__link">Method</a></li><li><a href="#considerations" class="table-of-contents__link">Considerations</a><ul><li><a href="#cost" class="table-of-contents__link">Cost</a></li><li><a href="#implementation" class="table-of-contents__link">Implementation</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/architecture-pillars/styles.59ce4859.js"></script>
<script src="/architecture-pillars/runtime~main.fb458387.js"></script>
<script src="/architecture-pillars/main.d98cc4a5.js"></script>
<script src="/architecture-pillars/1.d704cc14.js"></script>
<script src="/architecture-pillars/2.cfa801d4.js"></script>
<script src="/architecture-pillars/29.861029c2.js"></script>
<script src="/architecture-pillars/32.a55e7306.js"></script>
<script src="/architecture-pillars/935f2afb.77f91658.js"></script>
<script src="/architecture-pillars/17896441.cc7c9bcb.js"></script>
<script src="/architecture-pillars/e2eee4d6.19a81a48.js"></script>
</body>
</html>