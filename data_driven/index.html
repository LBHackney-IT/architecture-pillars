<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/architecture-pillars/blog/rss.xml" title="Hackney Architecture Pillars Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/architecture-pillars/blog/atom.xml" title="Hackney Architecture Pillars Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Hackney Architecture Pillars" href="/architecture-pillars/opensearch.xml"><title data-react-helmet="true">HackIT Data Driven Guidelines | Hackney Architecture Pillars</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="HackIT Data Driven Guidelines | Hackney Architecture Pillars"><meta data-react-helmet="true" name="description" content="Access to data"><meta data-react-helmet="true" property="og:description" content="Access to data"><meta data-react-helmet="true" property="og:url" content="https://github.com/LBHackney-IT/architecture-pillars/architecture-pillars/data_driven"><link data-react-helmet="true" rel="shortcut icon" href="/architecture-pillars/img/favicon.png"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link data-react-helmet="true" rel="canonical" href="https://github.com/LBHackney-IT/architecture-pillars/architecture-pillars/data_driven"><link rel="stylesheet" href="/architecture-pillars/styles.cd915cb9.css">
<link rel="stylesheet" href="/architecture-pillars/main.4a16e2e4.css">
<link rel="preload" href="/architecture-pillars/styles.f6ac9107.js" as="script">
<link rel="preload" href="/architecture-pillars/runtime~main.71af81c9.js" as="script">
<link rel="preload" href="/architecture-pillars/main.8b8442ee.js" as="script">
<link rel="preload" href="/architecture-pillars/1.eec28bb8.js" as="script">
<link rel="preload" href="/architecture-pillars/2.a8298974.js" as="script">
<link rel="preload" href="/architecture-pillars/24.0fb864de.js" as="script">
<link rel="preload" href="/architecture-pillars/27.c8565e74.js" as="script">
<link rel="preload" href="/architecture-pillars/935f2afb.798f97e7.js" as="script">
<link rel="preload" href="/architecture-pillars/17896441.f5024d09.js" as="script">
<link rel="preload" href="/architecture-pillars/bfea03f8.fd46173e.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_11B0">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/architecture-pillars/"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Architecture Pillars</strong></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/LBHackney-IT/architecture-pillars" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2N3Q"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_3NWk">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_3NWk">🌞</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/architecture-pillars/"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--light_3CMI navbar__logo"><img src="/architecture-pillars/img/logo-long.svg" alt="Architecture Pillars" class="themedImage_YANc themedImage--dark_3ARp navbar__logo"><strong class="navbar__title">Architecture Pillars</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a href="https://github.com/LBHackney-IT/architecture-pillars" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_vMrn"><div class="docSidebarContainer_3Ak5" role="complementary"><div class="sidebar_3gvy"><div class="menu menu--responsive thin-scrollbar menu_1yIk"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_1CUI" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Architecture Pillars</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Reliabilty</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/production_deployment">Production Deployment</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/core_resource_compliance">Core AWS resources compliance checks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Scalibility</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/auto_scaling">Auto-scaling for AWS resources used in Software Engineering</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Security</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/core_resource_compliance">Core AWS resources compliance checks</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Cost Optimisation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/auto_scaling">Auto-scaling for AWS resources used in Software Engineering</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">High Availability and Performance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/architecture-pillars/preferred_data_source">Preferred types of databases and when to use</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Development Principles and Quality Assurance</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/testing_standards">HackIT Testing Standards</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/architecture-pillars/data_driven">HackIT Data Driven Guidelines</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/api_compliance">API Compliance Checklist</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/qa_process">Enhancing the Quality Assurance process in Hackney through the use of automation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/repository_standards">Managing our GitHub repositories’ branches</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/minimum_qa_standard">Minimum QA testing requirements in Hackney’s Software Development Lifecycle</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/developer_onboarding">Developer technical on-boarding</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/data_modelling">Data Modelling Principles</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/adr">Architecture Decision Records</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/api_spec_asessment_process">API Specifications Assessment Process</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/architecture-pillars/data_meetup_template">Data Meetup Template</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link" href="/architecture-pillars/">Contact Our Development Team</a></li></ul></div></div></div><main class="docMainContainer_2iGs"><div class="container padding-vert--lg docItemWrapper_1bxp"><div class="row"><div class="col docItemCol_U38p"><div class="docItemContainer_a7m4"><article><header><h1 class="docTitle_Oumm">HackIT Data Driven Guidelines</h1></header><div class="markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="access-to-data"></a>Access to data<a class="hash-link" href="#access-to-data" title="Direct link to heading">#</a></h2><p>To comply with security best practices, Hackney’s preference is to follow the “least-privilege” access model.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="per-environment"></a>Per environment<a class="hash-link" href="#per-environment" title="Direct link to heading">#</a></h3><p><strong>Development</strong>
Should only contain dummy/test data.
Access to it by all developers for debugging purposes.</p><p><strong>Staging</strong>
Should only contain dummy/test data or obfuscated real data.
Access to it by all developers for debugging purposes.</p><p><strong>Production</strong>
Should contain real data
Limited direct access to the database - only few selected people for support purposes
Auditing enabled for access and queries against the data</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-will-the-data-be-accessed"></a>How will the data be accessed?<a class="hash-link" href="#how-will-the-data-be-accessed" title="Direct link to heading">#</a></h3><p>All access to data, aside from limited support purposes, should happen via APIs. </p><p>For all consumers, all data interactions (CRUD) should happen via an existing API endpoint. </p><ul><li>All of our APIs need to be protected via the Lambda authorizer built by Hackney.<ul><li>More can be found in our Playbook <a href="https://playbook.hackney.gov.uk/API-Playbook/lambda_authoriser" target="_blank" rel="noopener noreferrer">here</a>.</li></ul></li><li>Requesting access to our APIs will be moved to the Developer Hub (TBC)</li><li>As many of our APIs are reusable, a Data contract will need to be digitally signed to confirm purposes of accessing the data (TBC)</li></ul><p>Exceptions to the above</p><ul><li>Any legacy applications that do not support API consumption (if this is your use case, please discuss this with Rashmi Shetty as the PO of our reusable components).</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="reporting-data"></a>Reporting data<a class="hash-link" href="#reporting-data" title="Direct link to heading">#</a></h3><p>As Hackney is moving towards a “no database direct access” way of working, this affects the way reporting tools will access data.
For reporting purposes, any BI tool needs to access the data via an API (<em>as an interim solution</em>). </p><ul><li>A Specific Reporting API, providing a full list of records per entity, is available for this purpose. You can find more about how to use and access it here (TBC).</li><li>Any new requests for additional endpoints, to access entities, which are not already covered by the Reporting API, should be sent to <a href="/architecture-pillars/rashmi.shetty@hackney.gov.uk">Rashmi Shetty</a></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="future-goals---reporting-data"></a>Future goals - reporting data<a class="hash-link" href="#future-goals---reporting-data" title="Direct link to heading">#</a></h3><p>Currently, there is an ongoing data platform project that aims to build a data lake and an easier and more consistent way to digest data for reporting and analytics purposes.</p><p>The proposed Reporting APIs approach is an interim solution until the data lake is ready for use.</p><p>Future goals include:</p><ul><li>Leverage new Events Driven Architecture (EDA) approach to capture data updates</li><li>Update data in Data lakes using the events published as part of our EDA approach</li><li>Reporting tools connect to data lakes, instead of to APIs accessing operational databases.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="how-to-design-data-domain-driven-apis"></a>How to design data domain driven APIs<a class="hash-link" href="#how-to-design-data-domain-driven-apis" title="Direct link to heading">#</a></h3><p>At Hackney, our preference is to build Platform APis as microservices. We also have the concept of Service API, used for very specific use cases. </p><p><a href="https://playbook.hackney.gov.uk/API-Playbook/platform_api_vs_service_api" target="_blank" rel="noopener noreferrer">Platform vs Service API</a></p><ul><li>All of our Platform APIs are micro services - they are independent and serve a single purpose, which is interacting with data from a single domain. </li><li>When designing Platform APIs, you first need to know the data domain you are building it for as this drives the design of your APIs.</li><li>Platform APIs <strong>should not</strong> be built with a single project’s use case in mind.</li><li>Platform APIs <strong>should be</strong> built with reusability with mind<ul><li>This means always returning all available fields for a certain domain.<ul><li>It is the responsibility of the consuming service to only consume and use the data they need!</li></ul></li><li>Data should not be manipulated to fit a specific requirement.</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="choosing-the-right-data-source"></a>Choosing the right data source<a class="hash-link" href="#choosing-the-right-data-source" title="Direct link to heading">#</a></h3><ul><li>For NoSQL data sources, our preference is to use DynamoDB as the engine.</li><li>For SQL, relational databases, our preference is to use PostgreSQL as the database engine.</li></ul><p>As we have a hybrid approach, please refer to the criteria below for choosing the right database engine:</p><p>Assuming we know the main differences  between a SQL and a NoSQL database, those are some of the questions which will help us to choose the right type of database for our domain/service when the choice is not obvious:</p><p><strong>1. Do we have  a lot of updates and very frequent updates per second?</strong></p><ul><li>Yes: PostgreSQL - A NoSQL DB is probably not the best solution because updates are more expensive than the reads, as we have to read and write a document.</li><li>No: DynamoDB.
<strong>2. Do we need to support a lot of queries on different entity’s properties (this question excludes search functionalities)?</strong></li><li>Yes: PostgreSQL -  Queries on properties different  than Id and PartitionKey are anti-pattern for scaling out and so not suitable for NoSQL DB, those queries should be executed occasionally. </li><li>No: DynamoDB
<strong>3. Do we need low latency/sub-second data access? (this question excludes search functionalities)?</strong></li><li>Yes: DynamoDB - When there is a need for low latency data access, NoSQL tends to be really fast and in the order of ~10ms</li><li>No: PostgreSQL
<strong>4. Is our data highly structured and predictable?</strong></li><li>Yes: PostgreSQL - RDBMS are used when we now in advance the structure of the data and it does not change often (rigid structures)</li><li>No: DynamoDB - When our data structure changes and there is a need to have flexibility, NoSQL are a good choice
<strong>5. Do we need to be able to scale in the future?</strong></li><li>Yes: DynamoDB - NoSQL databases are horizontally scalable.</li><li>No: PostgreSQL - RDBMS are not horizontally scalable, they can be scaled only vertically.</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_prK2" id="where-should-data-live"></a>Where should data live?<a class="hash-link" href="#where-should-data-live" title="Direct link to heading">#</a></h3><p>We use AWS as our cloud hosting provider and operate a multi-account strategy. </p><p>Each AWS account is either service area specific (e.g. <strong>Housing-Production</strong>) or is service specific, for larger services. </p><ul><li>Data should live within the AWS account, specifying the purpose of the data and the domain the data is related to.<ul><li>For example, housing specific data should live within the Housing AWS accounts.</li></ul></li><li>This is so we can better manage the access to our data. Only people working on a project should have access to the data sources, holding the data related to that project (Production data should always have limited access). Everyone else should only access the data via APIs. </li></ul></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/LBHackney-IT/architecture-pillars/edit/master/docs/data_driven_guidelines.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2LL7"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/architecture-pillars/testing_standards"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« HackIT Testing Standards</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/architecture-pillars/api_compliance"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">API Compliance Checklist »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_2xL- thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#access-to-data" class="table-of-contents__link">Access to data</a><ul><li><a href="#per-environment" class="table-of-contents__link">Per environment</a></li><li><a href="#how-will-the-data-be-accessed" class="table-of-contents__link">How will the data be accessed?</a></li><li><a href="#reporting-data" class="table-of-contents__link">Reporting data</a></li><li><a href="#future-goals---reporting-data" class="table-of-contents__link">Future goals - reporting data</a></li><li><a href="#how-to-design-data-domain-driven-apis" class="table-of-contents__link">How to design data domain driven APIs</a></li><li><a href="#choosing-the-right-data-source" class="table-of-contents__link">Choosing the right data source</a></li><li><a href="#where-should-data-live" class="table-of-contents__link">Where should data live?</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Made by HackIT.</div></div></div></footer></div>
<script src="/architecture-pillars/styles.f6ac9107.js"></script>
<script src="/architecture-pillars/runtime~main.71af81c9.js"></script>
<script src="/architecture-pillars/main.8b8442ee.js"></script>
<script src="/architecture-pillars/1.eec28bb8.js"></script>
<script src="/architecture-pillars/2.a8298974.js"></script>
<script src="/architecture-pillars/24.0fb864de.js"></script>
<script src="/architecture-pillars/27.c8565e74.js"></script>
<script src="/architecture-pillars/935f2afb.798f97e7.js"></script>
<script src="/architecture-pillars/17896441.f5024d09.js"></script>
<script src="/architecture-pillars/bfea03f8.fd46173e.js"></script>
</body>
</html>