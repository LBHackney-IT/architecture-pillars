(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{93:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return s})),a.d(t,"metadata",(function(){return l})),a.d(t,"toc",(function(){return c})),a.d(t,"default",(function(){return p}));var r=a(3),n=a(7),o=(a(0),a(99)),i=["components"],s={id:"automated_remediation",title:"AWS Config for enabling automated remediation"},l={unversionedId:"automated_remediation",id:"automated_remediation",isDocsHomePage:!1,title:"AWS Config for enabling automated remediation",description:"Context",source:"@site/docs/automated_remediation.md",slug:"/automated_remediation",permalink:"/architecture-pillars/automated_remediation",editUrl:"https://github.com/LBHackney-IT/architecture-pillars/edit/master/docs/automated_remediation.md",version:"current",sidebar:"docs",previous:{title:"Core AWS resources compliance checks",permalink:"/architecture-pillars/core_resource_compliance"},next:{title:"Preferred types of databases and when to use",permalink:"/architecture-pillars/preferred_data_source"}},c=[{value:"Context",id:"context",children:[]},{value:"Vision",id:"vision",children:[]},{value:"User needs",id:"user-needs",children:[]},{value:"Method",id:"method",children:[]},{value:"Considerations",id:"considerations",children:[{value:"Cost",id:"cost",children:[]},{value:"Implementation",id:"implementation",children:[]}]}],u={toc:c};function p(e){var t=e.components,a=Object(n.a)(e,i);return Object(o.b)("wrapper",Object(r.a)({},u,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("h3",{id:"context"},"Context"),Object(o.b)("p",null,"AWS Config is an AWS service that provides a method to assess if the configuration of AWS resources deployed in an account are compliant with a set of manually configured rules and allows us to keep track of all changes made. "),Object(o.b)("p",null,"AWS provides a set of predefined rules that can be used, but also has the option of creating custom ones. The rules that are being evaluated are chosen by the customer on a per account/per resource basis based on the service and organisation needs and identify if the configuration of an existing or newly provisioned resource is compliant with common best practices - for example, if encryption is enabled for DynamoDB tables."),Object(o.b)("p",null,"AWS Config official documentation that details additional features can be found ",Object(o.b)("a",{parentName:"p",href:"https://aws.amazon.com/config/"},"here"),"."),Object(o.b)("p",null,"In Hackney, we are adopting several mechanisms to ensure that deployed resources are compliant with our preferred configuration, e.g. no database should be publicly accessible. Those include:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Following the ",Object(o.b)("a",{parentName:"li",href:"/architecture-pillars/dev_least_principles"},"least privilege principle"),", where engineers are unable to manually create AWS resources but must instead automate the creation via IaC (infrastructure as code) and CI/CD pipelines."),Object(o.b)("li",{parentName:"ul"},"Adopting ",Object(o.b)("a",{parentName:"li",href:"https://playbook.hackney.gov.uk/API-Playbook/terraform_compliance"},"Terraform-compliance")," security and compliance testing framework for performing pre-deployment  checks to ensure only compliant resources are deployed."),Object(o.b)("li",{parentName:"ul"},"Using ",Object(o.b)("a",{parentName:"li",href:"https://playbook.hackney.gov.uk/API-Playbook/serverless_safegaurd"},"serverless safeguards"),"  to ensure AWS resources provisioned via the Serverless framework are also compliant. ")),Object(o.b)("p",null,"However, some of those must be set up on a per-project basis, thus not guaranteeing security risks prevention by the proposed mechanisms due to no current way to ensure 100% take up amongst project teams."),Object(o.b)("p",null,"Enabling AWS Config with automated remediation can be done on account level, ensuring that our internal teams can set up a mechanism to enforce compliance even if not all project teams develop services following all of our standards in place that promote governance as service."),Object(o.b)("h3",{id:"vision"},"Vision"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Have a defined list of compliance rules for commonly used AWS resources that is frequently reviewed and updated as and when required so that we have consistency for rules applied as well as a process to iterate that list when we change our use of existing or new AWS services."),Object(o.b)("li",{parentName:"ul"},"Continuously monitor and detect non-compliant AWS resources so that we have visibility over potential security risks and performance, availability and cost impacting resources in our environments ."),Object(o.b)("li",{parentName:"ul"},"Automate remediation for breached rules so that our teams can focus on the other stages of a service delivery lifecycle and we have assurance that non-compliant resources would be corrected even if teams are unavailable to action a given compliance breach. "),Object(o.b)("li",{parentName:"ul"},"Provide assurance for our security setup so that stakeholders have a strong confidence in the setup of our environments."),Object(o.b)("li",{parentName:"ul"},"Ensure that resources provisioned are set up for performance, high availability and are cost optimised so that our services are more reliable and cost efficient.")),Object(o.b)("h3",{id:"user-needs"},"User needs"),Object(o.b)("p",null,"As an ",Object(o.b)("strong",{parentName:"p"},"architect"),", I want to ensure"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"that a solution\u2019s design is implemented with the appropriate infrastructure resources configuration that is compliant with Hackney\u2019s list of compliance requirements, which aim to promote better security, performance, reliability and availability at the lowest possible cost for a given service.")),Object(o.b)("p",null,"As an ",Object(o.b)("strong",{parentName:"p"},"engineer"),", I want "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"a way to automate remediation of non-compliant AWS resources so that I can focus on the rest of the software lifecycle / platform activities. ")),Object(o.b)("p",null,"As a ",Object(o.b)("strong",{parentName:"p"},"security analyst"),", I want"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"assurance that services are configured as per agreed security requirements for infrastructure components.\nvisibility over compliance of infrastructure components with agreed security requirements.")),Object(o.b)("p",null,"As a ",Object(o.b)("strong",{parentName:"p"},"TDA member"),", I want"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"to give assurance to Hackney senior stakeholders, staff and residents that services built are compliant and if audited, all criteria would be satisfied.")),Object(o.b)("h3",{id:"method"},"Method"),Object(o.b)("p",null,"Implement AWS Config rules and automated remediation, via Terraform, per account for the following types of resources (as part of the first iteration). "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"AWS S3 ","[add terraform module link]",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Automatically block public access"))),Object(o.b)("li",{parentName:"ul"},"AWS RDS","[add terraform module link]",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Disable public access to RDS"),Object(o.b)("li",{parentName:"ul"},"Enable Multi AZ on RDS"),Object(o.b)("li",{parentName:"ul"},"Enable deletion protection"))),Object(o.b)("li",{parentName:"ul"},"AWS SNS ","[add terraform module link]",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Encrypt SNS topics"))),Object(o.b)("li",{parentName:"ul"},"AWS Lambda ","[add terraform module link]",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Enable X-Ray for request tracing monitoring"))),Object(o.b)("li",{parentName:"ul"},"AWS DynamoDB ","[add terraform module link]",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Enable encryption"),Object(o.b)("li",{parentName:"ul"},"Enable PITR (Point in time recovery) for automated backups")))),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"The list of resources will be expanded following the trial of the tool. The initial list was prepared based on AWS resources commonly used for the development of our services.")),Object(o.b)("h2",{id:"considerations"},"Considerations"),Object(o.b)("h3",{id:"cost"},"Cost"),Object(o.b)("p",null,"As this is an AWS paid service and we have other compliance testing mechanisms in place (e.g. terraform-compliance), should we consider implementing AWS Config only for our Production environment?"),Object(o.b)("h3",{id:"implementation"},"Implementation"),Object(o.b)("p",null,"As a first iteration, this paper proposes to implement AWS Config with the set of rules and remediations already provided by AWS, instead of building custom ones. Should the tool work well for us, as well as if we identify a need for a custom rule/remediation, then that should be considered. "),Object(o.b)("p",null,"Further to this, can we use Control Tower to automatically enable those rules for new and existing AWS accounts instead of using terraform?"))}p.isMDXComponent=!0},99:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return b}));var r=a(0),n=a.n(r);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var c=n.a.createContext({}),u=function(e){var t=n.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):s(s({},t),e)),a},p=function(e){var t=u(e.components);return n.a.createElement(c.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return n.a.createElement(n.a.Fragment,{},t)}},m=n.a.forwardRef((function(e,t){var a=e.components,r=e.mdxType,o=e.originalType,i=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(a),m=r,b=p["".concat(i,".").concat(m)]||p[m]||d[m]||o;return a?n.a.createElement(b,s(s({ref:t},c),{},{components:a})):n.a.createElement(b,s({ref:t},c))}));function b(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=a.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=a[c];return n.a.createElement.apply(null,i)}return n.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"}}]);