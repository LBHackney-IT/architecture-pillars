(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{93:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return s})),n.d(t,"metadata",(function(){return c})),n.d(t,"toc",(function(){return l})),n.d(t,"default",(function(){return u}));var a=n(3),r=n(7),o=(n(0),n(97)),i=["components"],s={id:"release_process",title:"Managing API Releases"},c={unversionedId:"release_process",id:"release_process",isDocsHomePage:!1,title:"Managing API Releases",description:"As per Hackney\u2019s ways of working, we always try to opt for building reusable platform APIs instead of service APIs. This approach has proven to have reduced development time, reduced duplication of effort and increased consistency across our API platform.",source:"@site/docs/release_process.md",slug:"/release_process",permalink:"/architecture-pillars/release_process",editUrl:"https://github.com/LBHackney-IT/architecture-pillars/edit/master/docs/release_process.md",version:"current"},l=[{value:"Ownership of reusable components",id:"ownership-of-reusable-components",children:[]},{value:"Releasing changes",id:"releasing-changes",children:[]},{value:"Managing changes to APIs already in production",id:"managing-changes-to-apis-already-in-production",children:[]}],p={toc:l};function u(e){var t=e.components,n=Object(r.a)(e,i);return Object(o.b)("wrapper",Object(a.a)({},p,n,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"As per Hackney\u2019s ways of working, we always try to opt for building reusable ",Object(o.b)("a",{parentName:"p",href:"https://playbook.hackney.gov.uk/API-Playbook/platform_api_vs_service_api"},"platform APIs")," instead of service APIs. This approach has proven to have reduced development time, reduced duplication of effort and increased consistency across our API platform."),Object(o.b)("h3",{id:"ownership-of-reusable-components"},"Ownership of reusable components"),Object(o.b)("p",null,"As microservices are shared across multiple consuming services, there is no one single team responsible for maintaining those. "),Object(o.b)("p",null,"All engineers have shared ownership and responsibility for the maintenance of our APIs, including:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Actioning security vulnerabilities."),Object(o.b)("li",{parentName:"ul"},"Extending functionality, following our ",Object(o.b)("a",{parentName:"li",href:"https://playbook.hackney.gov.uk/api-specifications/assessment_process/"},"API specification assessment process"),".")),Object(o.b)("p",null,"Reusable components might have a team who are actively maintaining them as they are doing continuous work in extending the functionality as part of product development. In this case, ",Object(o.b)("a",{parentName:"p",href:"https://playbook.hackney.gov.uk/ways-of-working/"},"Hackney\u2019s PR process")," applies."),Object(o.b)("h3",{id:"releasing-changes"},"Releasing changes"),Object(o.b)("p",null,"Hackney\u2019s high level development lifecycle "),Object(o.b)("p",null,"(place diagram from here  ",Object(o.b)("a",{parentName:"p",href:"https://lucid.app/lucidchart/f3bd9a5f-0b2c-48e9-b5bf-ea15c2392e04/edit?viewport_loc=-1529%2C-1021%2C3893%2C1889%2CRXcrrlyFfDqh&invitationId=inv_475de4cd-58a9-48d9-b5cf-d44eac3c9663#"},"https://lucid.app/lucidchart/f3bd9a5f-0b2c-48e9-b5bf-ea15c2392e04/edit?viewport_loc=-1529%2C-1021%2C3893%2C1889%2CRXcrrlyFfDqh&invitationId=inv_475de4cd-58a9-48d9-b5cf-d44eac3c9663#"),") "),Object(o.b)("h4",{id:"product-changes-deployment"},"Product changes deployment"),Object(o.b)("p",null,"All new APIs and changes to existing APIs that are to be deployed across our AWS environments must adhere to our ",Object(o.b)("a",{parentName:"p",href:"https://playbook-development.hackney.gov.uk/API-Playbook/api_compliance"},"API compliance")," requirements."),Object(o.b)("h4",{id:"releasing-reusable-components"},"Releasing reusable components"),Object(o.b)("p",null,"As reusable components are shared amongst teams, all production deployments should be first announced on a common channel to raise awareness and allow for teams to provide feedback if they believe a deployment should be delayed. "),Object(o.b)("p",null,"To avoid introducing blockers for teams wishing to release their code, feature flag implementation should be used, which is described later in this document."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," All changes to the API design and contract of a reusable platform API should first be presented at the Data meetup as part of our ",Object(o.b)("a",{parentName:"p",href:"https://playbook.hackney.gov.uk/api-specifications/assessment_process/"},"API specification assessment process"),"."),Object(o.b)("h3",{id:"managing-changes-to-apis-already-in-production"},"Managing changes to APIs already in production"),Object(o.b)("h4",{id:"api-versioning"},"API Versioning"),Object(o.b)("p",null,"An API\u2019s ",Object(o.b)("strong",{parentName:"p"},"major version")," should be incremented if a breaking change is introduced. Breaking changes include:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Making an existing data property as required."),Object(o.b)("li",{parentName:"ul"},"Amending the API contract by removing or amending the name of an existing property."),Object(o.b)("li",{parentName:"ul"},"Other changes to the functionality that will change the output or requires input previously not required.")),Object(o.b)("p",null,"To increment an API\u2019s version, create a new folder with the version name and introduce the new API endpoint(s) under the new version. To reduce duplication of code, please use a shared NuGet package to extract common code/functionality instead of replicating it across API versions. You can find more information on what NuGet packages are and how we use them ",Object(o.b)("a",{parentName:"p",href:"https://playbook-development.hackney.gov.uk/API-Playbook/nuget_packages"},"here"),"."),Object(o.b)("p",null,Object(o.b)("strong",{parentName:"p"},"Note:")," Not all existing API endpoints need to be re-created under the new version. Only API endpoints with breaking changes should have their version incremented."),Object(o.b)("h4",{id:"feature-flags"},"Feature flags"),Object(o.b)("p",null,"Feature flags are a useful way of limiting what functionality is available to consuming services once the code has been deployed to an environment. "),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"A change to a reusable component might be needed that might not be a breaking change, so it won\u2019t require an incremented version, however, it might require prerequisites to be completed before it can be released."),Object(o.b)("li",{parentName:"ul"},"A change might be made by one of the teams, but it should not be released prior to a certain date.")),Object(o.b)("p",null,"As multiple teams share and make implementation changes to our reusable components, making use of feature flags allows for teams to manage when their change is released."),Object(o.b)("p",null,"A code change might be committed to the common repository\u2019s main branch and released as part of a deployment done by another team also seeking to release their changes. To avoid releasing code to a production environment, before the team who has implemented the change is comfortable with doing so, the change should be put behind a feature flag. In this way:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Teams do not introduce blockers to other teams wishing to release or delay the release of their changes."),Object(o.b)("li",{parentName:"ul"},"Code changes could be present in the production environment but not available to the API consumers and thus not causing potential service outages.   ")),Object(o.b)("p",null,"Feature flags implementation is documented ",Object(o.b)("a",{parentName:"p",href:"https://playbook-development.hackney.gov.uk/API-Playbook/feature-toggle"},"here"),"."))}u.isMDXComponent=!0},97:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return h}));var a=n(0),r=n.n(a);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=r.a.createContext({}),p=function(e){var t=r.a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):s(s({},t),e)),n},u=function(e){var t=p(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),u=p(n),b=a,h=u["".concat(i,".").concat(b)]||u[b]||d[b]||o;return n?r.a.createElement(h,s(s({ref:t},l),{},{components:n})):r.a.createElement(h,s({ref:t},l))}));function h(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=b;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s.mdxType="string"==typeof e?e:a,i[1]=s;for(var l=2;l<o;l++)i[l]=n[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,n)}b.displayName="MDXCreateElement"}}]);